<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Objective 8: Read, generate, and modify configuration &mdash; Terraform Study Guide 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Objective 9: Understand Terraform Cloud and Enterprise capabilities" href="../objective-9/cloud-and-enterprise.html" />
    <link rel="prev" title="Objective 7: Implement and maintain state" href="../objective-7/manage-state.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Terraform Study Guide
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../objective-1/Iac.html">Objective 1: Understand Infrastructure as Code (IaC) concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-2/iac-2.html">Objective 2: Understand Terraform’s purpose (vs other IaC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-3/terraform-basics.html">Objective 3: Understand Terraform basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-4/terraform-cli.html">Objective 4: Use the Terraform CLI (outside of core workflow)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-5/modules.html">Objective 5: Interact with Terraform modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-6/workflow.html">Objective 6: Navigate Terraform workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-7/manage-state.html">Objective 7: Implement and maintain state</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Objective 8: Read, generate, and modify configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective-9/cloud-and-enterprise.html">Objective 9: Understand Terraform Cloud and Enterprise capabilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Terraform Study Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Objective 8: Read, generate, and modify configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/objectives/objective-8/hcl-features.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="objective-8-read-generate-and-modify-configuration">
<h1>Objective 8: Read, generate, and modify configuration<a class="headerlink" href="#objective-8-read-generate-and-modify-configuration" title="Permalink to this heading"></a></h1>
<details><summary>Demonstrate use of variables and outputs</summary>
<p>
<p><a class="reference external" href="https://learn.hashicorp.com/terraform/getting-started/variables">Input Variables Tutorial</a></p>
<p><a class="reference external" href="https://learn.hashicorp.com/terraform/getting-started/outputs">Output Variables Tutorial</a></p>
</p>
</details>
<details><summary>Describe secure secret injection best practice</summary>
<p>
<p><strong>Vault Provider for Terraform</strong></p>
<ul class="simple">
<li><p>Best Practices</p>
<ul>
<li><p>avoid putting secret or sensitive variables in config or state files.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=fOybhcbuxJ0">Webinar walk-through on Best Practices</a></p></li>
<li><p>set secret variables for provider config block in environment variables.</p></li>
</ul>
</li>
</ul>
<div class="highlight-BASH notranslate"><div class="highlight"><pre><span></span><span class="c1">#auth_login Usage with userpass backend</span>
variable login_username <span class="o">{}</span>
variable login_password <span class="o">{}</span>

provider <span class="s2">&quot;vault&quot;</span> <span class="o">{</span>
  auth_login <span class="o">{</span>
    <span class="nv">path</span> <span class="o">=</span> <span class="s2">&quot;auth/userpass/login/</span><span class="si">${</span><span class="nv">var</span><span class="p">.login_username</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nv">parameters</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nv">password</span> <span class="o">=</span> var.login_password
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="c1">#auth_login Usage with approle</span>
variable login_approle_role_id <span class="o">{}</span>
variable login_approle_secret_id <span class="o">{}</span>

provider <span class="s2">&quot;vault&quot;</span> <span class="o">{</span>
  auth_login <span class="o">{</span>
    <span class="nv">path</span> <span class="o">=</span> <span class="s2">&quot;auth/approle/login&quot;</span>

    <span class="nv">parameters</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nv">role_id</span>   <span class="o">=</span> var.login_approle_role_id
      <span class="nv">secret_id</span> <span class="o">=</span> var.login_approle_secret_id
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="c1">#For multiple namespace in vault use alias</span>
provider <span class="s2">&quot;vault&quot;</span> <span class="o">{</span>
  <span class="nb">alias</span> <span class="o">=</span> <span class="s2">&quot;ns1&quot;</span>
  <span class="nv">namespace</span> <span class="o">=</span> <span class="s2">&quot;ns1&quot;</span>
<span class="o">}</span>

provider <span class="s2">&quot;vault&quot;</span> <span class="o">{</span>
  <span class="nb">alias</span> <span class="o">=</span> <span class="s2">&quot;ns2&quot;</span>
  <span class="nv">namespace</span> <span class="o">=</span> <span class="s2">&quot;ns2&quot;</span>
<span class="o">}</span>

resource <span class="s2">&quot;vault_generic_secret&quot;</span> <span class="s2">&quot;secret&quot;</span><span class="o">{</span>
  <span class="nv">provider</span> <span class="o">=</span> <span class="s2">&quot;vault.ns1&quot;</span>
  ...
<span class="o">}</span>
</pre></div>
</div>
</p>
</details>
<details><summary>Understand the use of collection and structural types</summary>
<p>
<p>Complex Types</p>
<ul class="simple">
<li><p>complex types group values into a single value. 2 types: Collection type(grouping similar values) and Structure types (grouping dissimilar values) Collection Types | Structural Types ———|—- multiple values of a type can be grouped together. The type of value within a collection is called <code class="docutils literal notranslate"><span class="pre">element</span> <span class="pre">type</span></code> | multiple values of several types grouped together | Example:<code class="docutils literal notranslate"><span class="pre">list(string)</span></code>List of string | Example: Object type of <code class="docutils literal notranslate"><span class="pre">object({</span> <span class="pre">name=string,</span> <span class="pre">age=number</span> <span class="pre">})</span></code> would match this value: <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">name</span> <span class="pre">&quot;John&quot;</span> <span class="pre">age</span> <span class="pre">=</span> <span class="pre">52</span> <span class="pre">}</span></code> Example of tuple:<code class="docutils literal notranslate"><span class="pre">[&quot;a&quot;,</span> <span class="pre">15,</span> <span class="pre">true]</span></code>| Collection Types:<code class="docutils literal notranslate"><span class="pre">list()</span></code>:Sequence of whole numbers starting at 0 <code class="docutils literal notranslate"><span class="pre">map()</span></code>:collection of values id’d by a label <code class="docutils literal notranslate"><span class="pre">set()</span></code>:unique values with no ids or order| Structural Types: <code class="docutils literal notranslate"><span class="pre">object()</span></code>:collection of named attributes that have their own type.The schema for object types is <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">&lt;KEY&gt;</span> <span class="pre">=</span> <span class="pre">&lt;TYPE&gt;,</span> <span class="pre">&lt;KEY&gt;</span> <span class="pre">=</span> <span class="pre">&lt;TYPE&gt;,</span> <span class="pre">...</span> <span class="pre">}</span> </code> and <code class="docutils literal notranslate"><span class="pre">tuple()</span></code>:sequence of elements id’d by whole numbers, each element has its own type.The schema for tuple types is <code class="docutils literal notranslate"><span class="pre">[&lt;TYPE&gt;,</span> <span class="pre">&lt;TYPE&gt;,</span> <span class="pre">...]</span></code></p></li>
</ul>
</p>
</details>
<details><summary>Create and differentiate resource and data configuration</summary>
<p>
<ul class="simple">
<li><p>Code Examples for <span class="xref myst">Resources</span> and <span class="xref myst">Data Sources</span></p></li>
</ul>
<p>|  | Syntax | Types and Arguments | Behavior | Meta-Arguments |
| — | — | — | — | — | — |
| Resources | blocks declare a resource of a given type <code class="docutils literal notranslate"><span class="pre">aws_instance</span></code> with a local name <code class="docutils literal notranslate"><span class="pre">web</span></code>. The local name is used to reference the resource in the module. In the braces <code class="docutils literal notranslate"><span class="pre">{}</span></code> config arguments are defined for the resource type. | each resource has a single resource type, each type belongs to a provider, body of resource are specific to type | when you create a new resource it only exists in the configuration until you <code class="docutils literal notranslate"><span class="pre">apply</span></code> it. When its created it is saved in state, and can be updated or destroyed | Each resource is associated with a single resource type, which determines the kind of infrastructure object it manages and what arguments and other attributes the resource supports | Resource behavior can be changed with the use of <a class="reference external" href="https://www.terraform.io/docs/configuration/resources.html">meta-arguments</a> |
| Data Sources | A data source is accessed via a special kind of resource known as a data resource, declared using a data block | Each data resource is associated with a single data source, this determines the kind of object(s) it reads and the available arguments. Most of the items within the body of a data block are defined by and specific to the selected data source, and these arguments can make full use of expressions and other dynamic Terraform language features. | If the query constraint arguments for a data resource refer only to constant values or values that are already known, the data resource will be read and its state updated during Terraform’s “refresh” phase, which runs prior to creating a plan. <a class="reference external" href="https://www.terraform.io/docs/configuration/data-sources.html">more on behavior</a> | As data sources are essentially a read only subset of resources, they also support the same meta-arguments of resources with the exception of the lifecycle configuration block. |</p>
</p>
</details>
<details><summary>Use resource addressing and resource parameters to connect resources together</summary>
<p>
<p><span class="xref myst">Connecting resources </span></p>
</p>
</details>
<details><summary>Use Terraform built-in functions to write configuration</summary>
<p>
<p>Built-in Functions</p>
<ul class="simple">
<li><p>Terraform only supports given functions</p></li>
<li><p><a class="reference external" href="https://www.terraform.io/docs/configuration/functions.html">List of Functions</a></p></li>
<li><p>This can also be viewed in the repo <span class="xref myst">here</span></p></li>
<li><p>To test functions in the command line run <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">console</span></code></p></li>
</ul>
</p>
</details>
<details><summary>Configure resource using a dynamic block</summary>
<p>
<p>Dynamic Blocks</p>
<ul>
<li><p>In top level block constructs(like resources) expressions can be used only when assigning a value to an argument with <code class="docutils literal notranslate"><span class="pre">name=expression</span></code></p></li>
<li><p>Some resource types have repeatable nested blocks in their arguments that don’t accept expressions.</p></li>
<li><p>Example:</p>
<div class="highlight-BASH notranslate"><div class="highlight"><pre><span></span>resource <span class="s2">&quot;aws_elastic_beanstalk_environment&quot;</span>  <span class="s2">&quot;tfenvtest&quot;</span> <span class="o">{</span>
  <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;tf-test-name&quot;</span> <span class="c1"># can use expressions here</span>
  setting <span class="o">{</span>
      <span class="c1"># but the &quot;setting&quot; block is always a       literal block</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p>You can create repeatable nested blocks with the block type <code class="docutils literal notranslate"><span class="pre">dynamic</span></code>. This is supported with resource,data,provider, and provisioner blocks</p></li>
<li><p>Example:</p>
<div class="highlight-BASH notranslate"><div class="highlight"><pre><span></span>resource <span class="s2">&quot;aws_elastic_beanstalk_environment&quot;</span> <span class="s2">&quot;tfenvtest&quot;</span> <span class="o">{</span>
<span class="nv">name</span>                <span class="o">=</span> <span class="s2">&quot;tf-test-name&quot;</span>
<span class="nv">application</span>         <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">aws_elastic_beanstalk_application</span><span class="p">.tftest.name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">solution_stack_name</span> <span class="o">=</span> <span class="s2">&quot;64bit Amazon Linux 2018.03 v2.11.4 running Go 1.12.6&quot;</span>

dynamic <span class="s2">&quot;setting&quot;</span> <span class="o">{</span>
  <span class="nv">for_each</span> <span class="o">=</span> var.settings
  content <span class="o">{</span>
    <span class="nv">namespace</span> <span class="o">=</span> setting.value<span class="o">[</span><span class="s2">&quot;namespace&quot;</span><span class="o">]</span>
    <span class="nv">name</span> <span class="o">=</span> setting.value<span class="o">[</span><span class="s2">&quot;name&quot;</span><span class="o">]</span>
    <span class="nv">value</span> <span class="o">=</span> setting.value<span class="o">[</span><span class="s2">&quot;value&quot;</span><span class="o">]</span>
   <span class="o">}</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p>Dynamic blocks can only produce arguments that belong to the resource type, data source, provider or provisioner being configured.</p></li>
<li><p>Overuse of dynamic blocks can get hard to read, it’s recommended to use them only to hide details in order to build a clean user interface for re-usability.</p></li>
</ul>
</p>
</details>
<details><summary>Describe built-in dependency management (order of execution based)</summary>
<p>
<p><a class="reference external" href="https://learn.hashicorp.com/terraform/getting-started/dependencies">Resource Dependencies Tutorial</a></p>
</p>
</details>
<hr class="docutils" />
<p><a class="reference internal" href="../objective-7/manage-state.html"><span class="doc std std-doc">⏮️</span></a> Objective 7   ||   Objective 9 <a class="reference internal" href="../objective-9/cloud-and-enterprise.html"><span class="doc std std-doc">⏩</span></a></p>
<p><span class="xref myst">🔙</span> README</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../objective-7/manage-state.html" class="btn btn-neutral float-left" title="Objective 7: Implement and maintain state" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../objective-9/cloud-and-enterprise.html" class="btn btn-neutral float-right" title="Objective 9: Understand Terraform Cloud and Enterprise capabilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Hugo Tinoco.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>